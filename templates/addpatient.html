<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>MedBase</title>
  <link rel="icon" href="/static/images/title.png" type="image/x-icon">
      
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

   <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css"/>
   <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
   <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.5.6/css/buttons.dataTables.min.css">

    <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.6/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.flash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.print.min.js"></script>



  <link rel="stylesheet" href="{{url_for('static', filename='css/styledoc.css')}}">
  <style>
    .card { 
        background-color: #f8f9fa;
        width: 40%;
        float: center;
        margin-top: 2%;
        margin-left: 30%;
        margin-right: 30%; 
    }
    .card-block { 
        padding: 50px;
    }
</style>
</head>

<body>
  <div class="d-flex" id="wrapper">

    <!-- Sidebar -->
    <div class="bg-light border-right" id="sidebar-wrapper">
        <div class="sidebar-heading d-flex justify-content-center"><img src="/static/images/logo.png" height="120" width="137"></div>
        <div class="list-group list-group-flush">
            <a href="/home" id="btnhome" class="list-group-item list-group-item-action bg-light">Home</a>
            <a href="/dashboard" id="btnshow" class="list-group-item list-group-item-action bg-light">Dashboard</a>
            <a style="background-color: #17a2b8;color: white;" id="btnadd" href="/addnew" class="list-group-item list-group-item-action">Add New Patient<img align="right" src="/static/images/arrow1.png" height="23" width="20"></a>
            <a href="/stats" id="btnstats"class="list-group-item list-group-item-action bg-light">Statistics</a>
            <a id="btnabout" href="/about" class="list-group-item list-group-item-action bg-light">About The Developers</a>
            <form id="formsignout" action="/signout"><a id="btnsignout" class="list-group-item list-group-item-action bg-light">Sign Out</a></form>
        </div>
      </div>
   
    <div id="page-content-wrapper">

      <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
          
          <img id="menu-toggle" src="https://img.icons8.com/ios/26/000000/menu.png">

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto mt-2 mt-lg-0">

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                {{ username }}  
              </a>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" onclick="alert('Username: {{username}}\nUID: {{uid}}')">Info</a>
                <a class="dropdown-item" href="#">Settings</a>       
              </div>
            </li>
          </ul>
        </div>
      </nav>
<!-- BEGIN -->
      <div id="div1" class="container-fluid">
        
          <div class="card">
              <div class="card-header">Add Patient</div>
              
              <form id="form1" class="text-center border border-light p-5" method="POST"> 
                
                  <div class="row">
                      <div class="col-lg-3">
                        <select class="form-control" name="day" id="day">
                          <option value="0">Day</option>
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                          <option value="6">6</option>
                          <option value="7">7</option>
                          <option value="8">8</option>
                          <option value="9">9</option>
                          <option value="10">10</option>
                          <option value="11">11</option>
                          <option value="12">12</option>
                          <option value="13">13</option>
                          <option value="14">14</option>
                          <option value="15">15</option>
                          <option value="16">16</option>
                          <option value="17">17</option>
                          <option value="18">18</option>
                          <option value="19">19</option>
                          <option value="20">20</option>
                          <option value="21">21</option>
                          <option value="22">22</option>
                          <option value="23">23</option>
                          <option value="24">24</option>
                          <option value="25">25</option>
                          <option value="26">26</option>
                          <option value="27">27</option>
                          <option value="28">28</option>
                          <option value="29">29</option>
                          <option value="30">30</option>
                          <option value="31">31</option>
                      </select>
                    </div>
                    <div class="col-lg-5">
                      <select class="form-control" name="month" id="month">
                          <option value="0">Month</option>
                          <option value="1">January</option>
                          <option value="2">February</option>
                          <option value="3">March</option>
                          <option value="4">April</option>
                          <option value="5">May</option>
                          <option value="6">June</option>
                          <option value="7">July</option>
                          <option value="8">August</option>
                          <option value="9">September</option>
                          <option value="10">October</option>
                          <option value="11">November</option>
                          <option value="12">December</option>
                      </select>
                  </div>
    
                    <div class="col-lg-4">
                        <select class="form-control" name="year" id="year">
                            <option value="0">Year</option>
                            <option value="2017">2017</option>
                            <option value="2018">2018</option>
                            <option value="2019">2019</option>
                        </select>
                      </div>
                 </div>
                 <hr>
                <div class="row">
                    <input type="text" id="name" name="name" class="form-control mb-4" style="text-transform: capitalize;" placeholder="Patient Name">
                </div>
                <div class="row">
                   <input type="text" name="med" id="med" class="form-control mb-4" placeholder="Medicine Name">
                </div>
                <hr>
                
                <div class="row">
                    <input style="margin-left: 20%; margin-right: 20%;" type="number" id="amt" name="amt" class="form-control mb-4" placeholder="₹ Amount">
                 </div>
            
                <div class="row">
                    <div class="col-lg-6">
                    <label class="container">Cash
                      <input id="cash" value="Cash" type="radio" name="radio">
                      <span class="checkmark"></span>
                    </label>
                </div>
                <div class="col-lg-6">
                    <label class="container">Card
                      <input id="card" value="Card" type="radio" name="radio">
                      <span class="checkmark"></span>
                    </label>
                </div>
               </div>
               <div class="row">
                    <div class="col-lg-6">
                    <label class="container">PayTM
                      <input id="paytm" value="PayTM" type="radio" name="radio">
                      <span class="checkmark"></span>
                    </label>
                </div>
                <div class="col-lg-6">
                    <label class="container">NEFT
                      <input id="neft" value="NEFT" type="radio" name="radio">
                      <span class="checkmark"></span>
                    </label>
                </div>
               </div>
                <div class="row">
                    <div class="col-lg-3"></div>
                    <div class="col-lg-6">
                    <label class="container">Not Paid
                      <input id="notpaid" value="None" type="radio" name="radio">
                      <span class="checkmark"></span>
                    </label>
                    </div>
                    <div class="col-lg-3"></div>
                </div>
                <br>
                <div class="row">
                    <input style="margin-left: 10%; margin-right: 10%;" type="number" name="pendamt" id="pendamt" class="form-control mb-4" placeholder="If Partially Paid, ₹ Amount Paid by Patient">
                 </div>
                 <hr>
                 <div class="row">
                    <div class="col-lg-9">
                        <button onclick="validate()" class="btn btn-info btn-block" type="submit">Add Patient</button>
                    </div>
                    <div class="col-lg-3">
                        <button type="reset" class="btn btn-danger btn-block">Reset</button>
                    </div>
                </div>
              </form>
            </div>  
         </div>
      </div>
    </div>
  <script>

    $("#menu-toggle").mouseover(function (e) {    
        $(this).css('opacity',0.5);
    }).mouseout(function (e) {
      $(this).css('opacity',1);
    });
    $("#menu-toggle").click(function(e) {
      e.preventDefault();
      $("#wrapper").toggleClass("toggled");
    });
    $("#btnsignout").click(function(){
      var c = confirm("Sign Out?");
      if (c == true) {
        document.getElementById("formsignout").submit();  
        }
    });

    $("#notpaid").click(function(){
        document.getElementById("pendamt").disabled = true;
    });
    $("#cash").click(function(){
        document.getElementById("pendamt").disabled = false;
    });
    $("#card").click(function(){
        document.getElementById("pendamt").disabled = false;
    });
    $("#neft").click(function(){
        document.getElementById("pendamt").disabled = false;
    });
    $("#paytm").click(function(){
        document.getElementById("pendamt").disabled = false;
    });

    function validate(){
        
        var name=document.getElementById('name').value;
        var med=document.getElementById('med').value;
        var amt=document.getElementById('amt').value;
        var pendamt=document.getElementById('pendamt').value; 
        var day = document.getElementById("day").options[document.getElementById("day").selectedIndex].value;
        var month = document.getElementById("month").options[document.getElementById("month").selectedIndex].value;
        var year = document.getElementById("year").options[document.getElementById("year").selectedIndex].value;

        if(!pendamt){
            pendamt=0;
        }
        
        if (day!=0 && month!=0 && year!=0){
        if(name && med && amt){
            if(document.getElementById('cash').checked || document.getElementById('card').checked || document.getElementById('paytm').checked || document.getElementById('neft').checked || document.getElementById('notpaid').checked){
                if(pendamt<amt){
                    alert('Patient Added');
                    document.getElementById('form1').action = '/addnewmethod';
                }       
                else{
                    alert('Amount Paid should be less than Final Amount');
                }
            }
            else{
                alert('Please select Payment Type');
            }
        }
        else{
            alert('Textbox cannot be empty');
        }
    }
    else{
      alert('Please select a date');
      
    }
  }


  var today = new Date();
  var dd = String(today.getDate()).padStart(2, '0');
  if(dd[0]=='0'){
    dd=dd[1];
  }

  var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
  
  var yyyy = today.getFullYear();
  document.getElementById("day").value = dd
  document.getElementById("month").selectedIndex = Number(mm);
  document.getElementById("year").value = yyyy

  </script>

</body>

</html>